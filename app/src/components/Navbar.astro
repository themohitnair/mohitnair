---
import { Menu, XCircle } from "lucide-astro";
import profile from "../data/profile.json";
---

<header
  class="sticky top-0 z-50 bg-background-dark/80 backdrop-blur-md border-b border-gray-800"
>
  <div class="container mx-auto px-4 py-3">
    <nav class="flex items-center justify-between">
      <a href="/" class="text-xl font-bold text-white flex items-center gap-2">
        <span class="text-accent">{profile.name.split(" ")[0]}</span>
        <span class="text-accent">{profile.name.split(" ")[1]}</span>
      </a>

      <!-- Mobile menu button -->
      <button
        id="menu-toggle"
        class="md:hidden text-white"
        aria-label="Toggle menu"
      >
        <Menu class="w-6 h-6" />
      </button>

      <!-- Desktop navigation -->
      <div class="hidden md:flex items-center gap-6">
        <a
          href="/#about"
          class="text-sm text-gray-300 hover:text-white transition-colors"
          >About</a
        >
        <a
          href="/#skills"
          class="text-sm text-gray-300 hover:text-white transition-colors"
          >Skills</a
        >
        <a
          href="/#education"
          class="text-sm text-gray-300 hover:text-white transition-colors"
          >Education</a
        >
        <a
          href="/#projects"
          class="text-sm text-gray-300 hover:text-white transition-colors"
          >Projects</a
        >
        <a
          href="/#interests"
          class="text-sm text-gray-300 hover:text-white transition-colors"
          >Interests</a
        >
        <a
          href="/#contact"
          class="text-sm text-gray-300 hover:text-white transition-colors"
          >Contact</a
        >
        <a
          href={profile.resumeUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="px-4 py-2 bg-accent text-white rounded-md text-sm font-medium hover:bg-accent/80 transition-colors"
        >
          Resume
        </a>
      </div>

      <!-- Mobile navigation -->
      <div
        id="mobile-menu"
        class="fixed inset-0 bg-background-dark/95 flex flex-col items-center justify-center gap-8 text-lg transform translate-x-full transition-transform duration-300 ease-in-out md:hidden"
      >
        <button
          id="close-menu"
          class="absolute top-4 right-4 text-white"
          aria-label="Close menu"
        >
          <XCircle class="w-6 h-6" />
        </button>
        <a
          href="/#about"
          class="text-gray-300 hover:text-white transition-colors">About</a
        >
        <a
          href="/#skills"
          class="text-gray-300 hover:text-white transition-colors">Skills</a
        >
        <a
          href="/#education"
          class="text-gray-300 hover:text-white transition-colors">Education</a
        >
        <a
          href="/#projects"
          class="text-gray-300 hover:text-white transition-colors">Projects</a
        >
        <a
          href="/#interests"
          class="text-gray-300 hover:text-white transition-colors">Interests</a
        >
        <a
          href="/#contact"
          class="text-gray-300 hover:text-white transition-colors">Contact</a
        >
        <a
          href={profile.resumeUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="px-6 py-2 bg-accent text-white rounded-md font-medium hover:bg-accent/80 transition-colors"
        >
          Resume
        </a>
      </div>
    </nav>
  </div>
</header>

<script>
  document.addEventListener("astro:page-load", () => {
    const menuToggle = document.getElementById("menu-toggle");
    const closeMenu = document.getElementById("close-menu");
    const mobileMenu = document.getElementById("mobile-menu");
    const mobileLinks = document.querySelectorAll("#mobile-menu a");

    menuToggle?.addEventListener("click", () => {
      mobileMenu?.classList.remove("translate-x-full");
      document.body.style.overflow = "hidden";
    });

    closeMenu?.addEventListener("click", () => {
      mobileMenu?.classList.add("translate-x-full");
      document.body.style.overflow = "";
    });

    mobileLinks.forEach((link) => {
      link.addEventListener("click", () => {
        mobileMenu?.classList.add("translate-x-full");
        document.body.style.overflow = "";
      });
    });
  });
</script>
