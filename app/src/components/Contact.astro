---
import { Gamepad, Github, Linkedin, Mail, Send, Twitter } from "lucide-astro";
import profile from "../data/profile.json";
---

<section id="contact" class="py-20 bg-black">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16" data-aos="fade-down" data-aos-duration="800">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">Get In Touch</h2>
      <p class="text-gray-400 max-w-2xl mx-auto">
        Feel free to reach out for collaborations, opportunities, or just to say
        hello!
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 max-w-4xl mx-auto">
      <div
        class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 hover:transform hover:scale-[1.02] transition-transform"
        data-aos="fade-right"
        data-aos-duration="1000"
        data-aos-delay="200"
      >
        <h3 class="text-xl font-semibold mb-6">Connect With Me</h3>

        <div class="space-y-6">
          <a
            href={`mailto:${profile.social.email}`}
            class="flex items-center gap-4 text-gray-300 hover:text-accent transition-all hover:translate-x-2"
            data-aos="fade-up"
            data-aos-delay="400"
          >
            <div
              class="w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center text-accent"
            >
              <Mail class="w-6 h-6" />
            </div>
            <div>
              <p class="font-medium">Email</p>
              <p class="text-gray-400">{profile.social.email}</p>
            </div>
          </a>

          <a
            href={profile.social.linkedin}
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-4 text-gray-300 hover:text-accent transition-all hover:translate-x-2"
            data-aos="fade-up"
            data-aos-delay="500"
          >
            <div
              class="w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center text-accent"
            >
              <Linkedin class="w-6 h-6" />
            </div>
            <div>
              <p class="font-medium">LinkedIn</p>
              <p class="text-gray-400">Connect professionally</p>
            </div>
          </a>

          <a
            href={profile.social.github}
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-4 text-gray-300 hover:text-accent transition-all hover:translate-x-2"
            data-aos="fade-up"
            data-aos-delay="600"
          >
            <div
              class="w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center text-accent"
            >
              <Github class="w-6 h-6" />
            </div>
            <div>
              <p class="font-medium">GitHub</p>
              <p class="text-gray-400">Check out my code</p>
            </div>
          </a>

          <a
            href={profile.social.twitter}
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-4 text-gray-300 hover:text-accent transition-all hover:translate-x-2"
            data-aos="fade-up"
            data-aos-delay="700"
          >
            <div
              class="w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center text-accent"
            >
              <Twitter class="w-6 h-6" />
            </div>
            <div>
              <p class="font-medium">Twitter</p>
              <p class="text-gray-400">Follow my updates</p>
            </div>
          </a>

          <a
            href={profile.social.chess}
            target="_blank"
            rel="noopener noreferrer"
            class="flex items-center gap-4 text-gray-300 hover:text-accent transition-all hover:translate-x-2"
            data-aos="fade-up"
            data-aos-delay="800"
          >
            <div
              class="w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center text-accent"
            >
              <Gamepad class="w-6 h-6" />
            </div>
            <div>
              <p class="font-medium">Chess.com</p>
              <p class="text-gray-400">Challenge me to a game</p>
            </div>
          </a>
        </div>
      </div>

      <div
        class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700/50 hover:transform hover:scale-[1.02] transition-transform"
        data-aos="fade-left"
        data-aos-duration="1000"
        data-aos-delay="200"
      >
        <h3 class="text-xl font-semibold mb-6">Send Me a Message</h3>

        <form
          id="contact-form"
          action="https://formspree.io/f/manedqdn"
          method="POST"
          class="space-y-4"
        >
          <div data-aos="fade-up" data-aos-delay="600">
            <label
              for="name"
              class="block text-sm font-medium text-gray-400 mb-1">Name</label
            >
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 text-white transition-all focus:scale-[1.02]"
            />
          </div>

          <div data-aos="fade-up" data-aos-delay="700">
            <label
              for="email"
              class="block text-sm font-medium text-gray-400 mb-1">Email</label
            >
            <input
              type="email"
              id="email"
              name="email"
              required
              class="w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 text-white transition-all focus:scale-[1.02]"
            />
          </div>

          <div data-aos="fade-up" data-aos-delay="800">
            <label
              for="message"
              class="block text-sm font-medium text-gray-400 mb-1"
              >Message</label
            >
            <textarea
              id="message"
              name="message"
              rows="4"
              required
              class="w-full px-4 py-2 bg-gray-700/50 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 text-white resize-none transition-all focus:scale-[1.02]"
            ></textarea>
          </div>

          <button
            type="submit"
            class="w-full px-6 py-3 bg-accent hover:bg-accent/80 text-white rounded-md font-medium transition-all hover:scale-[1.02] flex items-center justify-center gap-2"
            data-aos="fade-up"
            data-aos-delay="900"
          >
            <Send class="w-5 h-5" />
            Send Message
          </button>
        </form>

        <div
          id="form-success"
          class="hidden mt-4 p-4 bg-green-500/20 border border-green-500/50 rounded-md text-green-400"
        >
          Thanks for your message! I'll get back to you soon.
        </div>

        <div
          id="form-error"
          class="hidden mt-4 p-4 bg-red-500/20 border border-red-500/50 rounded-md text-red-400"
        >
          There was an error sending your message. Please try again.
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  import AOS from "aos";
  import "aos/dist/aos.css";

  document.addEventListener("astro:page-load", () => {
    AOS.init({
      once: true,
      offset: 50,
      duration: 800,
    });

    const contactForm = document.getElementById(
      "contact-form"
    ) as HTMLFormElement | null;
    const formSuccess = document.getElementById(
      "form-success"
    ) as HTMLElement | null;
    const formError = document.getElementById(
      "form-error"
    ) as HTMLElement | null;

    if (!contactForm) return;

    contactForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(contactForm);

      try {
        const response = await fetch(contactForm.action, {
          method: "POST",
          body: formData,
          headers: { Accept: "application/json" },
        });

        if (response.ok) {
          formSuccess?.classList.remove("hidden");
          formError?.classList.add("hidden");
          contactForm.reset();
          setTimeout(() => {
            formSuccess?.classList.add("hidden");
          }, 5000);
        } else {
          throw new Error("Form submission failed");
        }
      } catch (error) {
        formError?.classList.remove("hidden");
        formSuccess?.classList.add("hidden");
      }
    });
  });
</script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
